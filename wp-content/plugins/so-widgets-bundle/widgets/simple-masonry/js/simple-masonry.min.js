var sowb=window.sowb||{};jQuery((function(t){sowb.setupSimpleMasonries=function(){var i=t(".sow-masonry-grid");if(i.data("initialized"))return i;var a=function(){i.each((function(){var a=t(this),e=a.data("layouts"),s=window.matchMedia("(max-width: "+e.tablet.breakPoint+"px)"),o=window.matchMedia("(max-width: "+e.mobile.breakPoint+"px)"),n=e.desktop;o.matches?n=e.mobile:s.matches&&(n=e.tablet);var r=n.numColumns;a.css("width","auto");var h=n.gutter*(r-1),d=(a.width()-h)/r;a.width(d*r+h),a.imagesLoaded((function(){a.find("> .sow-masonry-grid-item").each((function(){var i=t(this),a=i.data("colSpan");a=Math.max(Math.min(a,n.numColumns),1),i.width(d*a+n.gutter*(a-1));var e=i.data("rowSpan");e=Math.max(Math.min(e,n.numColumns),1);var s=n.rowHeight||d;i.css("height",s*e+n.gutter*(e-1)+"px");var o=i.find("> img,> a > img"),r=!1;if(i.find(".image-title")){var h=parseInt(i.find(".image-title").outerHeight());isNaN(h)||(s+=h,i.find(".sow-masonry-grid-image").css("height","calc( 100% - "+h+"px)"),r=!0)}var m=o.height()>0?o.width()/o.height():1,w=i.height()>0?i.width()/i.height():1;if((m=parseFloat(m.toFixed(3)))>(w=parseFloat(w.toFixed(3)))){o.css("width","auto"),r||o.css("height","100%"),o.css("margin-top","");var g=-.5*(o.width()-i.width());o.css("margin-left",g+"px")}else{o.css("height","auto"),o.css("width","100%"),o.css("margin-left","");var c=-.5*(o.height()-i.height());o.css("margin-top",c+"px")}})),a.packery({itemSelector:".sow-masonry-grid-item",columnWidth:d,gutter:n.gutter,originLeft:a.data("layout-origin-left")}),i.prev(".sow-masonry-grid-preloader").length&&(i.prev().remove(),i.css("opacity",1))}))}))};t(window).on("resize panelsStretchRows",a),setTimeout((function(){a()}),100),i.data("initialized",!0)},sowb.setupSimpleMasonries(),t(sowb).on("setup_widgets",sowb.setupSimpleMasonries)})),window.sowb=sowb;